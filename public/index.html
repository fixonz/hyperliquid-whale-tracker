<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>Hyperliquid Alert</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>🚨 Hyperliquid Alert</h1>
      <div class="explanation-bar">
        <div class="explanation-text">
          <strong>What this does:</strong> Monitors whale positions and liquidations on Hyperliquid. 
          Auto-discovers new wallets from latest on-chain transactions every hour. Real-time alerts for million-dollar moves.
        </div>
      </div>
      <div class="stats-bar">
        <div class="stat">
          <span class="stat-label">Wallets Tracked</span>
          <span class="stat-value" id="whalesTracked">Scanning...</span>
        </div>
        <div class="stat">
          <span class="stat-label">Active Positions</span>
          <span class="stat-value" id="positionsCount">Scanning...</span>
        </div>
        <div class="stat">
          <span class="stat-label">Total Scans</span>
          <span class="stat-value" id="totalScans">Scanning...</span>
        </div>
        <div class="stat">
          <span class="stat-label">Status</span>
          <span class="stat-value status" id="status">Connecting...</span>
        </div>
        <div class="stat">
          <span class="stat-label">New Addresses</span>
          <span class="stat-value" id="newAddresses">Scanning...</span>
        </div>
        <div class="stat">
          <span class="stat-label">Total Liquidations</span>
          <span class="stat-value" id="totalLiquidations">Scanning...</span>
        </div>
        <div class="stat">
          <span class="stat-label">Liquidation Volume</span>
          <span class="stat-value" id="liquidationVolume">Scanning...</span>
        </div>
      </div>
    </header>

    <!-- Navigation Bar -->
    <div class="nav-bar">
      <button class="nav-btn active" onclick="scrollToSection('heatmap')">🔥 Heatmap</button>
      <button class="nav-btn" onclick="scrollToSection('positions')">📊 Positions</button>
      <button class="nav-btn" onclick="scrollToSection('alerts')">🚨 Alerts</button>
      <button class="nav-btn" onclick="scrollToSection('whales')">🐋 Whales</button>
      <button class="nav-btn" onclick="scrollToSection('discovery')">🔍 Discovery</button>
      <button class="nav-btn" onclick="scrollToSection('stats')">📈 Stats</button>
    </div>

    <div class="main-grid">
      <div class="panel heatmap-panel" id="heatmap">
        <h2>Liquidation Heatmap</h2>
        <div class="heatmap-controls">
          <select id="assetSelect">
            <option value="">All Assets</option>
          </select>
          <button onclick="refreshData()">Refresh</button>
        </div>
        <div id="heatmapContainer" class="heatmap-container">
          <div class="loading">Loading heatmap data...</div>
        </div>
      </div>

      <div class="panel positions-panel" id="positions">
        <h2>Whale Positions</h2>
        <div class="tabs">
          <button class="tab active" onclick="showTab('all')">All</button>
          <button class="tab" onclick="showTab('longs')">Longs</button>
          <button class="tab" onclick="showTab('shorts')">Shorts</button>
        </div>
        <div id="positionsContainer" class="positions-container">
          <div class="loading">Loading positions...</div>
        </div>
      </div>

      <div class="panel alerts-panel" id="alerts">
        <h2>Recent Alerts</h2>
        <div id="alertsContainer" class="alerts-container">
          <div class="loading">Loading alerts...</div>
        </div>
        <h3 style="margin-top:16px">Big Alerts</h3>
        <div id="bigAlertsContainer" class="alerts-container"></div>
      </div>

      <div class="panel whales-panel" id="whales">
        <h2>Top Profitable Whales</h2>
        <div id="whalesContainer" class="whales-container">
          <div class="loading">Loading whales...</div>
        </div>
      </div>

      <div class="panel discovery-panel" id="discovery">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
          <h2>🔍 Active Address Discovery</h2>
          <button onclick="triggerDiscovery()" class="discovery-btn" id="discoveryBtn">
            🔍 Discover Now
          </button>
        </div>
        <div class="discovery-stats">
          <div class="discovery-stat">
            <span class="discovery-label">Last Discovery:</span>
            <span class="discovery-value" id="lastDiscovery">Never</span>
          </div>
          <div class="discovery-stat">
            <span class="discovery-label">Addresses Found:</span>
            <span class="discovery-value" id="addressesFound">0</span>
          </div>
          <div class="discovery-stat">
            <span class="discovery-label">Newly Added:</span>
            <span class="discovery-value" id="newlyAdded">0</span>
          </div>
        </div>
        <div class="discovery-log" id="discoveryLog">
          <div class="loading">Waiting for discovery data...</div>
        </div>
      </div>

      <div class="panel stats-panel" id="stats">
        <h2>📊 7-Minute Activity Summary</h2>
        <div class="activity-stats">
          <div class="activity-stat">
            <span class="activity-label">Volume:</span>
            <span class="activity-value" id="sevenMinVolume">$0</span>
          </div>
          <div class="activity-stat">
            <span class="activity-label">Longs:</span>
            <span class="activity-value" id="sevenMinLongs">0 ($0)</span>
          </div>
          <div class="activity-stat">
            <span class="activity-label">Shorts:</span>
            <span class="activity-value" id="sevenMinShorts">0 ($0)</span>
          </div>
          <div class="activity-stat">
            <span class="activity-label">Max Leverage:</span>
            <span class="activity-value" id="sevenMinLeverage">0.0x</span>
          </div>
          <div class="activity-stat">
            <span class="activity-label">At Risk:</span>
            <span class="activity-value" id="sevenMinAtRisk">0 positions</span>
          </div>
        </div>
        <div class="closest-to-liq" id="closestToLiq">
          <div class="loading">Loading risk data...</div>
        </div>
        
        <div class="top-positions-section">
          <h3>🔥 TOP POSITIONS</h3>
          <div class="top-positions-list" id="topPositionsList">
            <div class="loading">Loading top positions...</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="footer-content">
      <div class="api-attribution">
        <span>Powered by:</span>
        <a href="https://hyperliquid.xyz" target="_blank" class="api-link">Hyperliquid</a>
        <span>&</span>
        <a href="https://hyperlens.io" target="_blank" class="api-link">Hyperlens.io</a>
      </div>
      <div class="footer-text">
        Data provided by Hyperliquid API and enhanced with Hyperlens.io analytics
      </div>
    </div>
  </footer>

  <script src="app.js"></script>
</body>
</html>

